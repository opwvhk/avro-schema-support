<idea-plugin>
	<id>net.sf.opk.avro-schema-support</id>
	<name>Apache Avro IDL Schema Support</name>
	<vendor email="oscar@westravanholthe.nl" url="https://www.github.com/opwvhk/avro-schema-support">
		Oscar Westra van Holthe - Kind
	</vendor>

	<description><![CDATA[
	<p>A plugin to support Avro schemas and protocols in IDL format (.avdl) and JSON (.avsc and .avpr).</p>
	<p>
		Provides full support for IDL files (see below), and recognizes <code>.avsc</code> and <code>.avpr</code> files as JSON and supplies JSON schemas for
		them. Additionally, allows converting Avro IDL files (.avdl) to/from Avro Schema/Protocol files (.avsc and .avpr).
	</p>
	<p>IDL features include:<ul>
		<li>Full parsing of Avro <code>.avdl</code> files, including new logical types like <code>local_timestamp_ms</code></li>
		<li>Syntax highlighting & formatting</li>
		<li>Code completion based on syntax and supported references</li>
		<li>
			Some semantic checks, like unknown symbols, invalid identifiers, and values for <code>@namespace</code>, <code>@aliases</code>
			and <code>@order</code> annotations
		</li>
		<li>Rename support for schema names (i.e. renaming records/errors, enums and fixed types also updates its references)</li>
	</ul></p>
	]]></description>

	<!-- please see https://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html on how to target different products -->
	<depends>com.intellij.modules.platform</depends>
	<depends>com.intellij.modules.lang</depends>

	<extensionPoints>
		<extensionPoint qualifiedName="opwvhk.avro.idl.naming.convention" interface="opwvhk.intellij.avro_idl.naming.AvroIdlNamingConvention" dynamic="true"/>
	</extensionPoints>
	<extensions defaultExtensionNs="com.intellij">
		<notificationGroup id="Avro IDL updates" displayType="STICKY_BALLOON" icon="opwvhk.intellij.avro_idl.AvroIdlIcons.LOGO"/>
		<postStartupActivity implementation="opwvhk.intellij.avro_idl.AvroIdlPluginUpdateStartupActivity"/>
		<!-- File type & Language -->
		<fileType name="Avro IDL" fieldName="INSTANCE" language="Avro IDL" extensions="avdl" implementationClass="opwvhk.intellij.avro_idl.AvroIdlFileType"/>
		<lang.parserDefinition language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.syntax.AvroIdlParserDefinition"/>
		<annotator language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.language.AvroIdlAnnotator"/>
		<lang.namesValidator language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.language.AvroIdlNamesValidator"/>
		<lang.elementManipulator forClass="opwvhk.intellij.avro_idl.psi.AvroIdlJsonStringLiteral"
		                         implementationClass="opwvhk.intellij.avro_idl.psi.AvroIdlJsonStringLiteralManipulator"/>
		<!-- Syntax highlighting & color definitions -->
		<lang.syntaxHighlighter language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.syntax.AvroIdlSyntaxHighlighter"/>
		<colorSettingsPage implementation="opwvhk.intellij.avro_idl.editor.AvroIdlColorSettingsPage"/>
		<!-- Code completion (additional to type references) -->
		<completion.contributor language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.language.AvroIdlCompletionContributor"/>
		<!-- References, navigation & editor actions -->
		<lang.findUsagesProvider language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.language.AvroIdlFindUsagesProvider"/>
		<gotoSymbolContributor implementation="opwvhk.intellij.avro_idl.language.AvroIdlChooseByNameContributor"/>
		<lang.refactoringSupport language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.language.AvroIdlRefactoringSupportProvider"/>
		<lang.commenter language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.editor.AvroIdlCommenter"/>
		<lang.braceMatcher language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.editor.AvroIdlPairedBraceMatcher"/>
		<!--<declarationRangeHandler key="opwvhk.intellij.avro_idl.psi.AvroIdlNameIdentifierOwner"
								 implementationClass="opwvhk.intellij.avro_idl.editor.AvroIdlDeclarationRangeHandler"/>-->
		<!-- Structure view -->
		<lang.psiStructureViewFactory language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.editor.AvroIdlStructureViewFactory"/>
		<!-- Formatting & code style -->
		<lang.foldingBuilder language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.editor.AvroIdlFoldingBuilder"/>
		<lang.formatter language="Avro IDL" implementationClass="opwvhk.intellij.avro_idl.editor.AvroIdlFormattingModelBuilder"/>
		<codeStyleSettingsProvider implementation="opwvhk.intellij.avro_idl.editor.AvroIdlCodeStyleSettingsProvider"/>
		<langCodeStyleSettingsProvider implementation="opwvhk.intellij.avro_idl.editor.AvroIdlLanguageCodeStyleSettingsProvider"/>
		<!-- Inspections (can be turned off) -->
		<localInspection language="Avro IDL" groupName="Avro IDL" displayName="Duplicate annotations" enabledByDefault="true" level="WARNING"
		                 id="AvroIdlDuplicateAnnotationsInspection" order="first"
		                 implementationClass="opwvhk.intellij.avro_idl.inspections.AvroIdlDuplicateAnnotationsInspection"/>
		<localInspection language="Avro IDL" groupName="Avro IDL" displayName="Misplaced annotations" enabledByDefault="true" level="WEAK WARNING"
		                 id="AvroIdlMisplacedAnnotationsInspection" order="after AvroIdlDuplicateAnnotationsInspection"
		                 implementationClass="opwvhk.intellij.avro_idl.inspections.AvroIdlMisplacedAnnotationsInspection"/>
		<localInspection language="Avro IDL" groupName="Avro IDL" displayName="Misplaced documentation" enabledByDefault="true" level="WARNING"
		                 id="AvroIdlMisplacedDocumentationInspection" order="after AvroIdlMisplacedAnnotationsInspection"
		                 implementationClass="opwvhk.intellij.avro_idl.inspections.AvroIdlMisplacedDocumentationInspection"/>
		<localInspection language="Avro IDL" groupName="Avro IDL" displayName="Union can be simplified" enabledByDefault="true" level="WEAK WARNING"
		                 id="AvroIdlUseNullableShorthandInspection" order="after AvroIdlMisplacedDocumentationInspection"
		                 implementationClass="opwvhk.intellij.avro_idl.inspections.AvroIdlUseNullableShorthandInspection"/>
		<localInspection language="Avro IDL" groupName="Avro IDL" displayName="Naming conventions" enabledByDefault="false" level="TYPO"
		                 id="AvroIdlNamingConventionInspection" order="after AvroIdlUseNullableShorthandInspection"
		                 implementationClass="opwvhk.intellij.avro_idl.inspections.AvroIdlNamingConventionInspection"/>
		<!--
		<localInspection language="Avro IDL" groupName="Avro IDL" displayName="New inspection" enabledByDefault="false" level="ERROR|WARNING|WEAK WARNING|SERVER PROBLEM|INFORMATION"
						 implementationClass="opwvhk.intellij.avro_idl.inspections.AvroIdlNewInspection"/>
		-->

		<!-- Avro Schema & Protocol files (JSON derivative) -->
		<fileType name="Avro Schema" fieldName="INSTANCE" language="Avro Schema" extensions="avsc"
		          implementationClass="opwvhk.intellij.avro_idl.AvroSchemaFileType"/>
		<lang.parserDefinition language="Avro Schema" implementationClass="opwvhk.intellij.avro_idl.syntax.AvroSchemaParserDefinition"/>
		<fileType name="Avro Protocol" fieldName="INSTANCE" language="Avro Protocol" extensions="avpr"
		          implementationClass="opwvhk.intellij.avro_idl.AvroProtocolFileType"/>
		<lang.parserDefinition language="Avro Protocol" implementationClass="opwvhk.intellij.avro_idl.syntax.AvroProtocolParserDefinition"/>
	</extensions>
	<extensions defaultExtensionNs="opwvhk.avro.idl">
		<naming.convention id="AvroIdlNamespaceNamingConvention" order="first"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlNamespaceNamingConvention"/>
		<naming.convention id="AvroIdlRecordNamingConvention" order="after AvroIdlNamespaceNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlRecordNamingConvention"/>
		<naming.convention id="AvroIdlErrorNamingConvention" order="after AvroIdlRecordNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlErrorNamingConvention"/>
		<naming.convention id="AvroIdlFieldNamingConvention" order="after AvroIdlErrorNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlFieldNamingConvention"/>
		<naming.convention id="AvroIdlEnumNamingConvention" order="after AvroIdlFieldNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlEnumNamingConvention"/>
		<naming.convention id="AvroIdlEnumConstantNamingConvention" order="after AvroIdlEnumNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlEnumConstantNamingConvention"/>
		<naming.convention id="AvroIdlFixedNamingConvention" order="after AvroIdlEnumConstantNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlFixedNamingConvention"/>
		<naming.convention id="AvroIdlProtocolNamingConvention" order="after AvroIdlFixedNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlProtocolNamingConvention"/>
		<naming.convention id="AvroIdlMessageNamingConvention" order="after AvroIdlProtocolNamingConvention"
		                   implementation="opwvhk.intellij.avro_idl.naming.AvroIdlMessageNamingConvention"/>
	</extensions>
	<extensions defaultExtensionNs="JavaScript">
		<JsonSchema.ProviderFactory implementation="opwvhk.intellij.avro_idl.json_schema.AvroJsonSchemaProviderFactory"/>
	</extensions>
	<extensions defaultExtensionNs="com.intellij.json">
		<jsonLikePsiWalkerFactory implementation="opwvhk.intellij.avro_idl.json_schema.AvroJsonSchemaPsiWalkerFactory"/>
	</extensions>
	<actions>
		<action id="avro-idl-to-protocol" text="Convert Avro IDL to Avro Protocol" description="Convert Avro IDL file to an Avro protocol file."
		        class="opwvhk.intellij.avro_idl.actions.AvroIdlToProtocolAction">
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>
		<action id="avro-idl-to-schema" text="Convert Avro IDL to Avro Schema" description="Convert Avro IDL file to a minimal number of Avro schema files."
		        class="opwvhk.intellij.avro_idl.actions.AvroIdlToSchemaAction">
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>
		<action id="avro-protocol-to-idl" text="Convert Avro Protocol to Avro IDL" description="Convert Avro protocol file an Avro IDL file."
		        class="opwvhk.intellij.avro_idl.actions.AvroProtocolToIdlAction">
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>
		<action id="avro-schema-to-idl" text="Convert Avro Schema to Avro IDL" description="Convert Avro schema file an Avro IDL file."
		        class="opwvhk.intellij.avro_idl.actions.AvroSchemaToIdlAction">
			<add-to-group group-id="RefactoringMenu" anchor="last"/>
		</action>

		<group id="AvroIdlNew" text="Avro IDL">
			<action id="AvroIdlNewFile" class="opwvhk.intellij.avro_idl.actions.AvroIdlCreateFileFromAction"/>
			<add-to-group group-id="NewGroup" anchor="before" relative-to-action="NewFromTemplate"/>
		</group>
	</actions>
</idea-plugin>
