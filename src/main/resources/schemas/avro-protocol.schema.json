{
	"$id": "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-protocol.schema.json",
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "avro-schema",
	"description": "JSON Schema for an Apache Avro protocol, version 1.10.1",
	"$ref": "#/definitions/protocol",
	"definitions": {
		"protocol": {
			"description": "An Avro protocol definition",
			"type": "object",
			"required": [ "protocol" ],
			"properties": {
				"protocol": { "$ref":  "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/nameOrNamespace"},
				"namespace": { "$ref":  "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/nameOrNamespace"},
				"doc": { "type":  "string" },
				"types": {
					"type":  "array",
					"uniqueItems": true,
					"items": { "oneOf": [
						{ "$ref": "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/record" },
						{ "$ref": "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/enum" },
						{ "$ref": "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/fixed" }
					] }
				},
				"messages": {
					"type": "object",
					"propertyNames": {
						"pattern": "^[A-Za-z_][A-Za-z0-9_]*$",
						"uniqueItems": true
					},
					"patternProperties": {
						"^.": { "$ref": "#/definitions/message" }
					}
				}
			}
		},
		"message": {
			"description": "A protocol message description",
			"type": "object",
			"required": [ "request", "response" ],
			"properties": {
				"doc": { "type": "string" },
				"request": {
					"description": "Message request parameters; treated as an anonymous records schema",
					"type": "array",
					"items": { "$ref": "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/field" },
					"uniqueItems": true
				},
				"response": {
					"description": "Message response type; can be any schema, and void is an alias for the null type",
					"oneOf": [
						{
							"type": "string",
							"const": "void"
						},
						{ "$ref": "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/schema" }
					]},
				"errors": {
					"description": "Errors that may be the result of the message; must be (references to) 'error' schemas",
					"type": "array",
					"uniqueItems": true,
					"items": {
						"allOf": [
							{ "$ref": "https://github.com/opwvhk/avro-schema-support/blob/master/src/main/resources/schemas/avro-schema.schema.json#/definitions/record" },
							{ "properties": {
								"type": {
									"enum": ["error"]
								}
							}}
						]
					}
				},
				"one-way": {
					"description": "Whether the message is one-way only. If true, the response schema MUST be null or void",
					"type": "boolean"
				}
			}
		}
	}
}
